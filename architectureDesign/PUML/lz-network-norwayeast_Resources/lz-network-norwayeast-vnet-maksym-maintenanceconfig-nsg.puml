@startuml

title Resources Display - Component Diagram

component Component {

json  Resource_Properties {
  "provisioningState": "Succeeded",
  "resourceGuid": "a5b2128a-e0e3-42d0-9f59-3f7f6eee03f4",
  "defaultSecurityRules": [
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "VirtualNetwork",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "VirtualNetwork",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow inbound traffic from all VMs in VNET",
        "protocol": "*",
        "direction": "Inbound",
        "priority": 65000,
        "access": "Allow"
      },
      "name": "AllowVnetInBound",
      "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/defaultSecurityRules/AllowVnetInBound",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "*",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "AzureLoadBalancer",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow inbound traffic from azure load balancer",
        "protocol": "*",
        "direction": "Inbound",
        "priority": 65001,
        "access": "Allow"
      },
      "name": "AllowAzureLoadBalancerInBound",
      "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/defaultSecurityRules/AllowAzureLoadBalancerInBound",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "*",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Deny all inbound traffic",
        "protocol": "*",
        "direction": "Inbound",
        "priority": 65500,
        "access": "Deny"
      },
      "name": "DenyAllInBound",
      "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/defaultSecurityRules/DenyAllInBound",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "VirtualNetwork",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "VirtualNetwork",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow outbound traffic from all VMs to all VMs in VNET",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 65000,
        "access": "Allow"
      },
      "name": "AllowVnetOutBound",
      "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/defaultSecurityRules/AllowVnetOutBound",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "Internet",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow outbound traffic from all VMs to Internet",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 65001,
        "access": "Allow"
      },
      "name": "AllowInternetOutBound",
      "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/defaultSecurityRules/AllowInternetOutBound",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "*",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Deny all outbound traffic",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 65500,
        "access": "Deny"
      },
      "name": "DenyAllOutBound",
      "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/defaultSecurityRules/DenyAllOutBound",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    }
  ],
  "securityRules": [
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "*",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "AzureLoadBalancer",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow RDP from bastion traffic",
        "protocol": "*",
        "direction": "Inbound",
        "priority": 4095,
        "access": "Allow"
      },
      "name": "allow-inbound-azureloadbalancer",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-inbound-azureloadbalancer",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "*",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Deny all inbound traffic",
        "protocol": "*",
        "direction": "Inbound",
        "priority": 4096,
        "access": "Deny"
      },
      "name": "deny-inbound-all",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/deny-inbound-all",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "10.104.4.160/28",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "53",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow outbound DNS traffic to DNS Forwarder",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 4093,
        "access": "Allow"
      },
      "name": "allow-outbound-dns-fwd",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-outbound-dns-fwd",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [
          "15.133.50.64/28",
          "20.60.100.0/27",
          "20.60.100.32/27",
          "20.60.100.64/27",
          "20.60.100.96/27",
          "20.60.100.128/26",
          "20.60.100.192/28",
          "20.60.102.0/24",
          "20.60.103.0/26",
          "20.60.103.64/26",
          "20.60.103.128/26",
          "20.60.103.192/26",
          "20.60.104.0/24",
          "20.60.105.0/28",
          "20.130.74.192/26",
          "20.135.69.200/29",
          "20.139.70.0/24",
          "20.159.41.73/32",
          "20.159.42.232/29",
          "20.198.232.0/24",
          "62.92.84.128/29",
          "62.92.84.136/29",
          "62.92.84.144/28",
          "62.92.84.160/28",
          "62.121.190.30/32",
          "68.137.114.88/30",
          "68.137.114.112/30",
          "68.141.72.0/26",
          "68.141.200.0/26",
          "69.184.0.0/16",
          "69.191.198.2/32",
          "69.191.230.2/32",
          "89.250.127.128/32",
          "89.250.127.196/32",
          "91.102.25.175/32",
          "91.102.25.176/32",
          "94.127.57.64/27",
          "94.127.61.64/27",
          "94.144.1.71/32",
          "94.144.1.108/32",
          "94.144.1.115/32",
          "138.35.0.0/16",
          "139.111.95.0/27",
          "139.114.217.64/28",
          "139.116.129.0/24",
          "146.172.4.224/29",
          "146.172.4.232/29",
          "146.172.7.228/32",
          "146.172.7.236/32",
          "146.192.38.32/29",
          "146.192.43.248/29",
          "146.192.219.96/27",
          "147.29.36.0/24",
          "147.29.38.23/32",
          "147.29.140.132/32",
          "147.29.140.133/32",
          "147.29.140.134/32",
          "147.29.140.135/32",
          "148.122.143.64/27",
          "148.122.165.66/32",
          "148.122.166.192/28",
          "148.122.166.208/28",
          "148.122.166.224/28",
          "148.122.211.130/32",
          "148.122.226.8/30",
          "148.122.226.12/30",
          "148.122.226.20/30",
          "148.122.226.28/30",
          "152.95.192.0/19",
          "152.95.225.32/29",
          "152.95.225.64/29",
          "152.177.151.188/30",
          "153.110.63.0/25",
          "153.110.197.0/25",
          "153.110.198.128/26",
          "153.110.224.160/28",
          "155.61.0.0/16",
          "155.195.0.0/16",
          "160.43.93.39/32",
          "160.43.94.158/32",
          "160.43.94.174/32",
          "160.43.166.170/32",
          "160.43.172.0/25",
          "185.35.212.64/28",
          "185.35.212.110/32",
          "193.88.156.0/23",
          "193.161.30.184/30",
          "193.214.20.167/32",
          "194.125.246.0/23",
          "194.213.168.166/32",
          "195.204.62.0/24",
          "195.254.173.168/29",
          "199.105.176.0/21",
          "199.105.184.0/23",
          "208.134.161.0/24",
          "217.65.224.212/32"
        ],
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Deny all outbound traffic to public IP adresses routed over internal networks",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 4094,
        "access": "Deny"
      },
      "name": "deny-outbound-internal-public-addresses",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/deny-outbound-internal-public-addresses",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "Internet",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow outbound internet traffic",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 4095,
        "access": "Allow"
      },
      "name": "allow-outbound-internet",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-outbound-internet",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [],
        "destinationAddressPrefix": "*",
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "destinationPortRange": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Deny all outbound traffic",
        "protocol": "*",
        "direction": "Outbound",
        "priority": 4096,
        "access": "Deny"
      },
      "name": "deny-outbound-all",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/deny-outbound-all",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [
          "10.104.4.128/28"
        ],
        "destinationPortRanges": [
          "53",
          "88",
          "135",
          "389",
          "445",
          "464",
          "636",
          "3268",
          "3269",
          "9389",
          "49152-65535"
        ],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allows AD client traffic to Active Directory DCs in kl Platform Identity Prod",
        "protocol": "tcp",
        "direction": "Outbound",
        "priority": 4001,
        "access": "Allow"
      },
      "name": "allow-outbound-tcp-to-adds",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-outbound-tcp-to-adds",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [
          "10.104.4.128/28"
        ],
        "destinationPortRanges": [
          "53",
          "88",
          "123",
          "389",
          "464",
          "49152-65535"
        ],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allows AD client traffic to Active Directory DCs in kl Platform Identity Prod",
        "protocol": "udp",
        "direction": "Outbound",
        "priority": 4002,
        "access": "Allow"
      },
      "name": "allow-outbound-udp-to-adds",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-outbound-udp-to-adds",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [
          "172.25.51.21/32",
          "172.25.51.22/32"
        ],
        "destinationPortRanges": [
          "80"
        ],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow CRL check to subca1kl, suca2kl",
        "protocol": "tcp",
        "direction": "Outbound",
        "priority": 4004,
        "access": "Allow"
      },
      "name": "allow-outbound-pki-onprem",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-outbound-pki-onprem",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    },
    {
      "properties": {
        "provisioningState": "Succeeded",
        "destinationAddressPrefixes": [
          "10.104.8.64/28"
        ],
        "destinationPortRanges": [
          "80",
          "135",
          "49152-65535"
        ],
        "sourceAddressPrefixes": [],
        "sourceAddressPrefix": "*",
        "sourcePortRanges": [],
        "sourcePortRange": "*",
        "description": "Allow outbound PKI traffic (CRL + Certificate request) to CA in kl Platform Identity PKI",
        "protocol": "tcp",
        "direction": "Outbound",
        "priority": 4005,
        "access": "Allow"
      },
      "name": "allow-outbound-pki-az",
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "id": "/subscriptions/0/resourceGroups/lz-network-norwayeast/providers/Microsoft.Network/networkSecurityGroups/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg/securityRules/allow-outbound-pki-az",
      "etag": "W/\"0ebac6e4-f37e-4532-af4f-22111490f966\""
    }
  ],
  "flowLogs": [
    {
      "id": "/subscriptions/0/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_norwayeast/flowLogs/lz-network-norwayeast-vnet-maksym-maintenanceconfig-nsg-flowlog"
    }
  ]
}
}
@enduml
